bintray {
    user = project.hasProperty('bintrayUser') ? project.property('bintrayUser') : System.getenv('BINTRAY_USER')
    key = project.hasProperty('bintrayApiKey') ? project.property('bintrayApiKey') : System.getenv('BINTRAY_API_KEY')
    publish = true
    override = true

    pkg {
        userOrg = project.projectBintrayUserOrg
        repo = project.projectBintrayRepoName
        name = project.projectBintrayArtifactName
        licenses = ['MIT']
        publications = ['mavenProject']

        version {
            name = project.version
            released = new Date()
            vcsTag = project.version
        }
    }
}

bintrayUpload.doFirst {
    publications = project.publishing.publications
}

bintrayUpload.dependsOn publishToMavenLocal